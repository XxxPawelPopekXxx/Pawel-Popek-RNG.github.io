<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Paweł RNG</title>
<style>
body{
  background:#121212;
  color:white;
  font-family:Arial;
  text-align:center;
}

button{
  padding:12px 25px;
  border:none;
  border-radius:12px;
  font-size:1.1em;
  cursor:pointer;
  margin:5px;
}

#rollButton{background:#4CAF50;color:white;}
#muteButton{background:#f44336;color:white;}
.upgradeButton{background:#2196F3;color:white;}

#resultImage{
  width:280px;
  height:280px;
  border-radius:15px;
  margin:20px auto;
  transition:0.25s;
}

/* ANIMACJE */
.rollAnim{
  animation: rollShake 0.4s ease;
}
@keyframes rollShake{
  0%{transform:rotate(0deg) scale(1);}
  25%{transform:rotate(5deg) scale(1.05);}
  50%{transform:rotate(-5deg) scale(1.1);}
  75%{transform:rotate(5deg) scale(1.05);}
  100%{transform:rotate(0deg) scale(1);}
}

.flash{
  animation: flash 0.25s ease;
}
@keyframes flash{
  0%{filter:brightness(1);}
  50%{filter:brightness(2);}
  100%{filter:brightness(1);}
}

#history{
  background:#222;
  border:1px solid #555;
  padding:10px;
  width:90%;
  margin:auto;
  max-height:200px;
  overflow-y:auto;
  border-radius:10px;
}

#stats{
  position:fixed;
  right:10px;
  top:10px;
  background:#222;
  padding:10px;
  border-radius:10px;
  border:1px solid #555;
  width:230px;
  text-align:left;
}

#resetProgress{
  position:fixed;
  left:10px;
  bottom:10px;
  background:red;
  padding:10px 20px;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}

#resetOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:1000;
}
#resetBox{
  background:#222;
  padding:25px;
  border-radius:15px;
}
</style>
</head>
<body>

<h1>Paweł RNG</h1>

<div id="stats">
  Monety: <span id="statsCoins">0</span><br>
  Losowania: <span id="statsRolls">0</span><br>
  Luck: x<span id="statsLuck">1</span><br>
  Playtime: <span id="statsTime">0</span>s
</div>

<img id="resultImage" src="photo.png">
<div id="resultText">Kliknij Roll</div>
<div id="chanceText"></div>
<div id="rarityText"></div>

<button id="rollButton">ROLL</button>
<div id="cooldownDisplay">Cooldown: 2.0s</div>

<div>Monety: <span id="coins">0</span></div>

<h3>Historia:</h3>
<div id="history"></div>

<div id="resetProgress">RESET PROGRESS</div>

<div id="resetOverlay">
  <div id="resetBox">
    <p>Czy na pewno zresetować cały progres?</p>
    <button id="resetYes" style="background:green;color:white;">TAK</button>
    <button id="resetNo" style="background:red;color:white;">NIE</button>
  </div>
</div>

<audio id="backgroundMusic" loop></audio>

<script>
let coins=0, rolls=0, luck=1, cooldown=2, canRoll=true, playTime=0;
let inventory=[];
let autoRoll=false;

const coinsEl=document.getElementById("coins");
const statsCoins=document.getElementById("statsCoins");
const statsRolls=document.getElementById("statsRolls");
const statsLuck=document.getElementById("statsLuck");
const statsTime=document.getElementById("statsTime");
const resultImage=document.getElementById("resultImage");
const resultText=document.getElementById("resultText");
const chanceText=document.getElementById("chanceText");
const rarityText=document.getElementById("rarityText");
const historyEl=document.getElementById("history");
const cooldownDisplay=document.getElementById("cooldownDisplay");

const items=[
 {src:"photo.png",text:"gejmingowy paweł",chance:50,rarity:"Common",reward:10},
 {src:"photo2.png",text:"paweł prezydent",chance:25,rarity:"Uncommon",reward:25},
 {src:"photo3.png",text:"pawel w żółtym hoodie",chance:15,rarity:"Rare",reward:50},
 {src:"photo4.png",text:"funni paweł",chance:7,rarity:"Epic",reward:100},
 {src:"photo5.png",text:"paweł ok",chance:2,rarity:"Mythic",reward:250},
 {src:"photo6.png",text:"świąteczny paweł",chance:1,rarity:"Legendary",reward:500},
 {src:"photo7.png",text:"paweł dostaje backshoty",chance:0.5,rarity:"Ultra",reward:1500},
 {src:"photo8.png",text:"paweł komunista",chance:0.2,rarity:"GODLIKE",reward:5000}
];

// PLAYTIME
setInterval(()=>{
  playTime++;
  statsTime.textContent=playTime;
},1000);

// ROLL
function rollRNG(){
 if(!canRoll) return;
 canRoll=false;
 rolls++;
 statsRolls.textContent=rolls;

 // animacja
 resultImage.classList.add("rollAnim");

 setTimeout(()=>{
  let totalChance=0;
  items.forEach(i=>totalChance+=i.chance*luck);
  let r=Math.random()*totalChance;
  let sum=0, selected;

  for(let i of items){
    sum+=i.chance*luck;
    if(r<=sum){selected=i;break;}
  }

  resultImage.src=selected.src;
  resultText.textContent=selected.text;
  chanceText.textContent="Nagroda: +"+selected.reward+" monet";
  rarityText.textContent="Rzadkość: "+selected.rarity;

  resultImage.classList.add("flash");
  setTimeout(()=>resultImage.classList.remove("flash"),200);

  coins+=selected.reward;
  coinsEl.textContent=coins;
  statsCoins.textContent=coins;

  historyEl.innerHTML=`<div>[${new Date().toLocaleTimeString()}] ${selected.text} (+${selected.reward})</div>`+historyEl.innerHTML;

  let cd=cooldown;
  const interval=setInterval(()=>{
    cd-=0.1;
    cooldownDisplay.textContent="Cooldown: "+cd.toFixed(1)+"s";
    if(cd<=0){
      clearInterval(interval);
      cooldownDisplay.textContent="Cooldown: 0s";
      canRoll=true;
    }
  },100);

  resultImage.classList.remove("rollAnim");
 },300);
}

document.getElementById("rollButton").addEventListener("click",rollRNG);

// RESET
document.getElementById("resetProgress").onclick=()=>{
  document.getElementById("resetOverlay").style.display="flex";
};

document.getElementById("resetNo").onclick=()=>{
  document.getElementById("resetOverlay").style.display="none";
};

document.getElementById("resetYes").onclick=()=>{
  coins=0;
  rolls=0;
  luck=1;
  cooldown=2;
  inventory=[];
  historyEl.innerHTML="";
  coinsEl.textContent=0;
  statsCoins.textContent=0;
  statsRolls.textContent=0;
  statsLuck.textContent=1;
  resultText.textContent="Kliknij Roll";
  chanceText.textContent="";
  rarityText.textContent="";
  document.getElementById("resetOverlay").style.display="none";
  alert("Progres został zresetowany!");
};
</script>

</body>
</html>
