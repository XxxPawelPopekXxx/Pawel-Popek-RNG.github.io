<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paweł RNG</title>
<style>
body { font-family: Arial; background:#121212; color:#fff; text-align:center; margin:0; padding:0; }
h1 { margin-top:20px; font-size:2em; }
button { padding:15px 30px; font-size:1.2em; margin:10px; cursor:pointer; border:none; border-radius:10px; transition:transform 0.2s; }
button:active { transform: scale(0.9); }
#rollButton { background-color:#4CAF50; color:white; }
#muteButton { background-color:#f44336; color:white; }
.upgradeButton { background-color:#2196F3; color:white; }
#resultImage { width:300px; height:300px; margin:20px auto; object-fit:cover; border-radius:15px; display:block; transition:all 0.1s; }
#resultText { font-size:1.5em; margin-top:10px; }
#chanceText, #rarityText { font-size:1.2em; margin-top:5px; }
#currency { margin-top:20px; font-size:1.3em; }
#upgrades { margin-top:20px; font-size:1em; display:flex; flex-wrap:wrap; justify-content:center; }
#upgrades button { margin:5px; }
#inventory, #history, #cooldownDisplay { margin-top:15px; font-size:1.1em; }
#history { max-height:200px; overflow-y:auto; border:1px solid #555; padding:10px; border-radius:10px; width:90%; margin:10px auto; background-color:#222; }
#stats { position:fixed; top:10px; right:10px; background-color:#222; border:1px solid #555; padding:10px; border-radius:10px; text-align:left; width:250px; font-size:0.9em; }
#resetOverlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:999; color:white; justify-content:center; align-items:center; }
#resetBox { background:#222; padding:30px; border-radius:15px; text-align:center; max-width:400px; }
#resetBox p { font-size:1.5em; color:red; margin-bottom:20px; }
#resetBox button { margin:10px; padding:10px 20px; font-size:1.2em; border-radius:10px; cursor:pointer; }
#resetYes { background-color:green; color:white; }
#resetNo { background-color:red; color:white; }
#volumeControl { margin-top:15px; }
#resetProgress { position:fixed; bottom:10px; left:10px; background-color:#f44336; color:white; padding:10px 15px; border-radius:10px; font-weight:bold; cursor:pointer; }
#chanceList { margin-top:10px; font-size:0.9em; color:#ccc; text-align:left; max-width:250px; margin-left:auto; margin-right:auto; }
#shopOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.75); display: flex; justify-content: center; align-items: center; z-index: 1000; visibility: hidden; opacity: 0; transition: opacity 0.2s ease; }
#shopOverlay.active { visibility: visible; opacity: 1; }
#shopBox { background-color: #222; padding: 25px; border-radius: 15px; width: 360px; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,0.6); max-height: 80%; overflow-y: auto; }
.shopItem { border: 1px solid #555; border-radius: 10px; padding: 10px; margin: 10px 0; }
.shopItem button { display: block; width: 80%; margin: 10px auto 0 auto; background-color: #4CAF50; color: white; font-size: 1.1em; border-radius: 10px; cursor: pointer; padding: 10px 0; }
</style>
</head>
<body>

<h1>Paweł RNG</h1>

<div id="stats">
  <div>Monety: <span id="statsCoins">0</span></div>
  <div>Autorzy: KoleszkaPP i its4iko</div>
  <div>Play Time: <span id="statsPlayTime">0s</span></div>
  <div>Łączne losowania: <span id="statsRolls">0</span></div>
  <div>Luck: x<span id="statsLuck">1</span></div>
</div>

<img id="resultImage" src="photo.png" alt="Result">
<div id="resultText">Kliknij Roll</div>
<div id="chanceText"></div>
<div id="rarityText"></div>
<button id="rollButton">Roll</button>
<div id="cooldownDisplay">Cooldown: 2.0s</div>

<input type="range" min="0" max="100" value="100" id="volumeControl"> Głośność
<br>
<button id="muteButton">Mute/Unmute</button>

<div id="currency">Monety: <span id="coins">0</span></div>
<button id="openShop" class="upgradeButton">Sklep</button>

<div id="upgrades">
  <button class="upgradeButton" id="shortenCooldown">Skróć cooldown (-0.5s) 50 monet</button>
  <button class="upgradeButton" id="increaseChances">Ulepszenie szans 100 monet</button>
  <button class="upgradeButton" id="buyItem">Kup Tajemniczy Przedmiot 100 monet</button>
  <button class="upgradeButton" id="toggleAutoRoll">Włącz Auto-Roll 5000 monet</button>
</div>

<div id="inventory">Ekwipunek: brak</div>
<div id="history">Historia losowań:</div>

<div id="resetProgress">RESET PROGRESS</div>

<div id="shopOverlay">
  <div id="shopBox">
    <h2>Sklep Pawła</h2>
    <div class="shopItem">
      <b>Lucky Pawel (1.5x)</b><br>gejmingowy paweł x20<br>paweł prezydent x10<br>1000 monet
      <button onclick="buyShopItem('Lucky Pawel')">Kup</button>
    </div>
    <div class="shopItem">
      <b>Mega Pawel (2x)</b><br>pawel w zoltym hoodie x25<br>funni paweł x15<br>2500 monet
      <button onclick="buyShopItem('Mega Pawel')">Kup</button>
    </div>
    <div class="shopItem">
      <b>Ultimate Pawel (3x)</b><br>paweł ok x50<br>świąteczny paweł x20<br>paweł dostaje backshoty x2<br>paweł komunista x1<br>5000 monet
      <button onclick="buyShopItem('Ultimate Pawel')">Kup</button>
    </div>
    <button onclick="closeShop()">Zamknij</button>
  </div>
</div>

<div id="resetOverlay">
  <div id="resetBox">
    <p>Czy na pewno chcesz zresetować progres?</p>
    <button id="resetYes">Tak</button>
    <button id="resetNo">Nie</button>
  </div>
</div>

<div id="chanceList"></div>
<audio id="backgroundMusic" loop></audio>

<script>
let coins = 0, rolls = 0, luck = 1, cooldown = 2.0, canRoll = true;
const coinsEl = document.getElementById('coins');
const statsCoinsEl = document.getElementById('statsCoins');
const statsRollsEl = document.getElementById('statsRolls');
const statsLuckEl = document.getElementById('statsLuck');
const resultImage = document.getElementById('resultImage');
const resultText = document.getElementById('resultText');
const chanceText = document.getElementById('chanceText');
const rarityText = document.getElementById('rarityText');
const cooldownDisplay = document.getElementById('cooldownDisplay');
const bgMusic = document.getElementById('backgroundMusic');
const shopOverlay = document.getElementById('shopOverlay');

const items = [
  {src:'photo.png', text:'gejmingowy paweł', chance:0.5, rarity:'Common'},
  {src:'photo2.png', text:'paweł prezydent', chance:0.25, rarity:'Uncommon'},
  {src:'photo3.png', text:'pawel w zoltym hoodie', chance:0.15, rarity:'Rare'},
  {src:'photo4.png', text:'funni paweł', chance:0.07, rarity:'Epic'},
  {src:'photo5.png', text:'paweł ok', chance:0.02, rarity:'Mythic'},
  {src:'photo6.png', text:'świąteczny paweł', chance:0.01, rarity:'Legendary'},
  {src:'photo7.png', text:'paweł dostaje backshoty', chance:0.005, rarity:'Ultra Legendary'},
  {src:'photo8.png', text:'paweł komunista', chance:0.002, rarity:'Ultra Legendary'}
];

// --- Roll ---
function rollRNG(){
  if(!canRoll) return;
  canRoll=false;
  rolls++; statsRollsEl.textContent = rolls;

  let r=Math.random(), cum=0, selected=items[0];
  for(let i=0;i<items.length;i++){ cum+=items[i].chance*luck; if(r<=cum){selected=items[i]; break;} }

  resultImage.src=selected.src;
  resultText.textContent=selected.text;
  chanceText.textContent=`Szansa: 1/${(1/selected.chance).toFixed(1)}`;
  rarityText.textContent=`Rzadkość: ${selected.rarity}`;

  coins+=10; coinsEl.textContent=coins; statsCoinsEl.textContent=coins;

  let remaining=cooldown;
  cooldownDisplay.textContent=`Cooldown: ${remaining.toFixed(1)}s`;
  const interval=setInterval(()=>{
    remaining-=0.1;
    if(remaining<=0){ clearInterval(interval); canRoll=true; cooldownDisplay.textContent=`Cooldown: 0s`; }
    else cooldownDisplay.textContent=`Cooldown: ${remaining.toFixed(1)}s`;
  },100);
}
document.getElementById('rollButton').addEventListener('click', rollRNG);

// --- Shop ---
function openShop(){ shopOverlay.classList.add('active'); }
function closeShop(){ shopOverlay.classList.remove('active'); }
document.getElementById('openShop').addEventListener('click', openShop);
function buyShopItem(type){
  let price = 1000;
  if(coins<price){ alert("Nie masz monet!"); return; }
  coins-=price; coinsEl.textContent=coins; statsCoinsEl.textContent=coins; alert("Kupiono: "+type);
}

// --- Upgrades ---
document.getElementById('shortenCooldown').addEventListener('click', ()=>{
  if(coins>=50){ coins-=50; cooldown=Math.max(0.1,cooldown-0.5); coinsEl.textContent=coins; statsCoinsEl.textContent=coins;}
  else alert("Nie masz monet!");
});
document.getElementById('increaseChances').addEventListener('click', ()=>{
  if(coins>=100){ coins-=100; luck+=0.1; coinsEl.textContent=coins; statsCoinsEl.textContent=coins; statsLuckEl.textContent=luck.toFixed(1);}
  else alert("Nie masz monet!");
});
document.getElementById('buyItem').addEventListener('click', ()=>{
  if(coins>=100){ coins-=100; coinsEl.textContent=coins; statsCoinsEl.textContent=coins; alert("Kupiono Tajemniczy Przedmiot");}
  else alert("Nie masz monet!");
});
document.getElementById('toggleAutoRoll').addEventListener('click', ()=>{
  if(coins>=5000){ coins-=5000; coinsEl.textContent=coins; statsCoinsEl.textContent=coins; alert("Auto-Roll włączony");}
  else alert("Nie masz monet!");
});

// --- Music ---
const musicFiles=['music.mp3','music2.mp3','music3.mp3','music4.mp3','music5.mp3'];
function playRandomMusic(){ const m=musicFiles[Math.floor(Math.random()*musicFiles.length)]; bgMusic.src=m; bgMusic.play(); }
playRandomMusic();
document.getElementById('muteButton').addEventListener('click', ()=>{ bgMusic.muted=!bgMusic.muted; });
</script>

</body>
</html>
